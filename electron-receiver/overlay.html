<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>演出オーバーレイ</title>
    <style>
      :root { --alpha: 0.5; }
      html, body { height: 100%; }
      body {
        margin: 0;
        background: rgba(0,0,0,var(--alpha)); /* 半透明 */
        color: #ffffff;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", Meiryo, sans-serif;
        -webkit-user-select: none;
      }
      .bar {
        position: fixed; inset: 0 0 auto 0; height: 44px;
        -webkit-app-region: drag; /* ドラッグで移動 */
      }
      .btns { position: absolute; right: 8px; top: 8px; display: grid; grid-auto-flow: column; gap: 8px; }
      .btn { width: 28px; height: 28px; border-radius: 6px; border: 1px solid rgba(255,255,255,.6); background: rgba(0,0,0,.25); 
             display: grid; place-items: center; cursor: pointer; -webkit-app-region: no-drag; }
      .btn:hover { background: rgba(0,0,0,.35); }
      .icon { width: 16px; height: 16px; display: block; }
      .center { position: fixed; inset: 0; display: grid; place-items: center; pointer-events: none; }
      .hidden { display: none; }
      .label { font-size: 28px; font-weight: 800; letter-spacing: .1em; text-shadow: 0 2px 10px rgba(0,0,0,.35); }
    </style>
  </head>
  <body>
    <div class="bar">
      <div class="btns">
        <button id="btn-full" class="btn" title="全画面">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9V3h6"/><path d="M21 15v6h-6"/><path d="M21 9V3h-6"/><path d="M3 15v6h6"/>
          </svg>
        </button>
        <button id="btn-clear" class="btn" title="透明">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="9"/><path d="M5 5l14 14"/>
          </svg>
        </button>
      </div>
    </div>
    <div id="centerLabel" class="center hidden"><div class="label">透明中</div></div>

    <script>
      const fullBtn = document.getElementById('btn-full');
      const clearBtn = document.getElementById('btn-clear');
      const center = document.getElementById('centerLabel');

      // 既定は半透明（--alpha=0.5）
      function setAlpha(a){ document.documentElement.style.setProperty('--alpha', String(a)); }

      fullBtn?.addEventListener('click', () => { window.OverlayApi?.goFullscreen?.(); });

      clearBtn?.addEventListener('click', () => {
        // 背景を完全透明にしてボタンも隠す。中央に「透明中」を表示
        setAlpha(0);
        document.querySelector('.btns')?.classList.add('hidden');
        center?.classList.remove('hidden');
      });
    </script>
  </body>
  </html>
