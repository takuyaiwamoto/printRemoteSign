<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>設定 — 背景変更</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      .settings { padding: 16px; display: grid; gap: 16px; }
      .panel { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
      .head { font-weight: 700; margin-bottom: 8px; }
      .choices { display: grid; grid-template-columns: repeat(2, 120px); gap: 12px; }
      .card { display: grid; gap: 6px; justify-items: center; padding: 8px; border: 1px solid #d1d5db; border-radius: 10px; background: #f9fafb; cursor: pointer; }
      .card.is-active { border-color: #2563eb; background: #eff6ff; box-shadow: 0 0 0 2px rgba(37,99,235,.15) inset; }
      .card img { width: 100px; height: 70px; object-fit: cover; border-radius: 6px; border: 1px solid #e5e7eb; background: #fff; }
      .card .label { font-size: 12px; color: #374151; }
      .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      .muted { color: #6b7280; }
      .notice { font-size: 12px; color: #6b7280; }
      .btn-grid { display: flex; flex-wrap: wrap; gap: 10px; }
      .btn { appearance: none; border: none; border-radius: 8px; padding: 10px 18px; font-size: 14px; font-weight: 600; cursor: pointer; transition: transform .05s ease, box-shadow .1s ease; color: #fff; background: #2563eb; box-shadow: 0 4px 12px rgba(37, 99, 235, .2); }
      .btn:active { transform: translateY(1px); box-shadow: 0 2px 6px rgba(37, 99, 235, .25); }
      .btn.is-secondary { background: #10b981; box-shadow: 0 4px 12px rgba(16, 185, 129, .2); }
      .btn.is-danger { background: #f97316; box-shadow: 0 4px 12px rgba(249, 115, 22, .2); }
      .btn:disabled { opacity: 0.6; cursor: not-allowed; box-shadow: none; transform: none; }
    </style>
  </head>
  <body>
    <div class="settings">
      <div style="display:grid; justify-items:center; margin-top:50px;">
        <label style="display:grid; gap:6px; justify-items:center;">
          <div><strong>受信側サイズ</strong> <span class="muted">（今の大きさ=100）</span></div>
          <input id="scaleReceiver" type="range" min="1" max="100" value="50" style="width:320px;">
          <div class="muted">現在: <span id="scaleVal">50</span>%</div>
        </label>
      </div>
      <div class="row">
        <div class="panel">
          <div class="head">送るアニメーション（遅延）</div>
          <div style="display:grid; gap:8px;">
            <label>回転までの遅延X（秒 0-10）
              <input id="animDelayRotate" type="range" min="0" max="10" value="0" step="1" style="width:320px;">
              <span class="muted">現在: <span id="animDelayRotateVal">0</span>s</span>
            </label>
            <label>移動までの遅延Z（秒 0-10）
              <input id="animDelayMove" type="range" min="0" max="10" value="2" step="1" style="width:320px;">
              <span class="muted">現在: <span id="animDelayMoveVal">2</span>s</span>
            </label>
            <label>再表示までの遅延（秒 0-20）
              <input id="animDelayReappear" type="range" min="0" max="20" value="" step="1" style="width:320px;">
              <span class="muted">現在: <span id="animDelayReappearVal">既定</span></span>
            </label>
            <label>印刷開始遅延（秒 0-15）
              <input id="printDelaySec" type="range" min="0" max="15" value="0" step="1" style="width:320px;">
              <span class="muted">現在: <span id="printDelayVal">0</span>s</span>
            </label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel">
          <div class="head">カウント設定</div>
          <div style="display:grid; gap:8px;">
            <label>開始前カウント（秒 0-10）
              <input id="preCountSec" type="range" min="0" max="10" value="3" step="1" style="width:320px;">
              <span class="muted">現在: <span id="preCountSecVal">3</span>s</span>
            </label>
            <label>上昇後カウント（秒 5-120）
              <input id="stayCountSec" type="range" min="5" max="120" value="90" step="1" style="width:320px;">
              <span class="muted">現在: <span id="stayCountSecVal">90</span>s</span>
            </label>
            <label>警告色開始（残り秒 0-60）
              <input id="warnCountSec" type="range" min="0" max="60" value="10" step="1" style="width:320px;">
              <span class="muted">現在: <span id="warnCountSecVal">10</span>s</span>
            </label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel" id="printPanel">
          <div class="head">印刷設定</div>
          <div style="display:grid; gap:8px;">
            <label style="display:flex; align-items:center; gap:8px;">
              <input id="printRotate180" type="checkbox" />
              印刷は180度で出力（はがき上下反転）
            </label>
          </div>
        </div>
        <div class="panel" id="hardwarePanel">
          <div class="head">ハードウェア接続テスト</div>
          <div class="btn-grid">
            <button type="button" id="btn-led-blue" class="btn">LEDを青で点灯</button>
            <button type="button" id="btn-led-off" class="btn">LEDを消灯</button>
            <button type="button" id="btn-led-rainbow" class="btn is-secondary">LEDをレインボー点灯</button>
            <button type="button" id="btn-relay-test" class="btn is-danger">リレーをテスト</button>
          </div>
          <div class="notice">※テストボタンはArduinoリレーシールドとの接続を確認するための簡易動作です。</div>
        </div>
      </div>
      <div><strong>背景設定</strong> <span class="muted">（クリックで送信／即時反映）</span></div>
      <div class="row">
        <div class="panel" id="senderPanel">
          <div class="head">書き手（送信）背景</div>
          <div class="choices">
            <div class="card" data-target="sender" data-mode="white">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3C/svg%3E" alt="白"/>
              <div class="label">白背景</div>
            </div>
            <div class="card" data-target="sender" data-mode="image" data-url="back2.png">
              <img src="back2.png" alt="back2.png"/>
              <div class="label">back2.png</div>
            </div>
            <div class="card" data-target="sender" data-mode="image" data-url="enoguM1.png">
              <img src="enoguM1.png" alt="enoguM1.png"/>
              <div class="label">enoguM1.png</div>
            </div>
          </div>
        </div>
        <div class="panel" id="receiverPanel">
          <div class="head">受信背景</div>
          <div class="choices">
            <div class="card" data-target="receiver" data-mode="white">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3C/svg%3E" alt="白"/>
              <div class="label">白背景</div>
            </div>
            <div class="card" data-target="receiver" data-mode="image" data-url="back2.png">
              <img src="back2.png" alt="back2.png"/>
              <div class="label">back2.png</div>
            </div>
            <div class="card" data-target="receiver" data-mode="image" data-url="enoguM1.png">
              <img src="enoguM1.png" alt="enoguM1.png"/>
              <div class="label">enoguM1.png</div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel" id="animEnabledPanel">
          <div class="head">アニメーション ON/OFF</div>
          <div class="choices">
            <div class="card" data-target="animEnabled" data-enabled="1">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='%232563eb'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='white'%3EON%3C/text%3E%3C/svg%3E" alt="ON"/>
              <div class="label">あり</div>
            </div>
            <div class="card is-active" data-target="animEnabled" data-enabled="0">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='%23151826'%3EOFF%3C/text%3E%3C/svg%3E" alt="OFF"/>
              <div class="label">なし（既定）</div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel" id="rotatePanel">
          <div class="head">受信キャンバスの回転</div>
          <div class="choices">
            <div class="card" data-target="rotate" data-rot="0">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3C/svg%3E" alt="0度"/>
              <div class="label">0度</div>
            </div>
            <div class="card" data-target="rotate" data-rot="180">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='24' fill='black'%3E180°%3C/text%3E%3C/svg%3E" alt="180度"/>
              <div class="label">180度</div>
            </div>
          </div>
          <div class="notice">既定は180度（受信側のみ反映）</div>
        </div>
      </div>
      <div class="row">
        <div class="panel" id="animTypePanel">
          <div class="head">アニメーション種類</div>
          <div class="choices">
            <div class="card" data-target="animType" data-anim="A">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='black'%3EA%3C/text%3E%3C/svg%3E" alt="A"/>
              <div class="label">A（回転→移動＋紙吹雪）</div>
            </div>
            <div class="card" data-target="animType" data-anim="B">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='white'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='black'%3EB%3C/text%3E%3C/svg%3E" alt="B"/>
              <div class="label">B（動画）</div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel" id="audioPanel">
          <div class="head">アニメB 音量</div>
          <div style="display:grid; gap:8px;">
            <label>
              音量（0〜100）
              <input id="animAudioVol" type="range" min="0" max="100" value="30" step="1" style="width:320px;">
              <span class="muted">現在: <span id="animAudioVolVal">30</span>%</span>
            </label>
          </div>
        </div>
      </div>
      <div class="notice">注: back2.png / enoguM.png はプロジェクト直下に配置してください。GitHub Pagesでは相対URLで配信されます。</div>
    </div>

    <script src="sender-config.js"></script>
    <script src="settings.js"></script>
  </body>
  </html>
